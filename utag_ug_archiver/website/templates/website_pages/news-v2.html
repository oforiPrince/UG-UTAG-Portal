{% extends "base/base-v2.html" %}
{% load static %}
{% load image_tags %}
{% block title %}News{% endblock title %}
{% block content %}

<!--Breadcrumb Banner Area Start-->
<div class="breadcrumb-banner-area blog">
  <div class="container">
    <div class="row">
      <div class="col-md-12">
        <div class="breadcrumb-text">
          <h1 class="text-center">News</h1>
          <div class="breadcrumb-bar">
            <ul class="breadcrumb">
              <li><a href="{% url 'website:index' %}">Home</a></li>
              <li>News</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!--End of Breadcrumb Banner Area-->

<!--News Page Area Start-->
<section class="utag-news-page">
  <div class="container">
    {% if news_page.object_list %}
      <div class="utag-news-grid">
        {% for news in news_page.object_list %}
        <article class="utag-news-card">
          <a href="{% url 'website:news_detail' slug=news.news_slug %}" class="utag-news-card-link">
            <div class="utag-news-image">
              <img src="{{ news.featured_image.url }}"
                   alt="{{ news.title }}"
                   loading="lazy" />
              <div class="utag-news-date">
                <span class="day">{{ news.created_at|date:"d" }}</span>
                <span class="month">{{ news.created_at|date:"M" }}</span>
                <span class="year">{{ news.created_at|date:"Y" }}</span>
              </div>
            </div>
            <div class="utag-news-content">
              <h3>{{ news.title|truncatechars:80 }}</h3>
              <p>{{ news.content|striptags|truncatechars:120|safe }}</p>
              <span class="utag-read-more">Read more <i class="fa fa-arrow-right"></i></span>
            </div>
          </a>
        </article>
        {% endfor %}
      </div>
      
      <!-- Enhanced Pagination -->
      {% if news_page.paginator.num_pages > 1 %}
      <nav class="utag-pagination" aria-label="News pagination">
        <ul class="utag-pagination-list">
          <!-- Previous Button -->
          {% if news_page.has_previous %}
            <li class="utag-page-item utag-page-nav">
              <a href="?page={{ news_page.previous_page_number }}" class="utag-page-link" aria-label="Previous">
                <i class="fa fa-chevron-left"></i>
              </a>
            </li>
          {% else %}
            <li class="utag-page-item utag-page-nav disabled">
              <span class="utag-page-link"><i class="fa fa-chevron-left"></i></span>
            </li>
          {% endif %}
          
          <!-- Page Numbers -->
          {% for num in news_page.paginator.page_range %}
            {% if news_page.number == num %}
              <li class="utag-page-item active">
                <span class="utag-page-link">{{ num }}</span>
              </li>
            {% elif num == 1 or num == news_page.paginator.num_pages %}
              <!-- Always show first and last page -->
              <li class="utag-page-item">
                <a href="?page={{ num }}" class="utag-page-link">{{ num }}</a>
              </li>
            {% elif num >= news_page.number|add:"-2" and num <= news_page.number|add:"2" %}
              <!-- Show pages within 2 of current -->
              <li class="utag-page-item">
                <a href="?page={{ num }}" class="utag-page-link">{{ num }}</a>
              </li>
            {% elif num == news_page.number|add:"-3" or num == news_page.number|add:"3" %}
              <!-- Show ellipsis -->
              <li class="utag-page-item utag-page-ellipsis">
                <span class="utag-page-link">&hellip;</span>
              </li>
            {% endif %}
          {% endfor %}
          
          <!-- Next Button -->
          {% if news_page.has_next %}
            <li class="utag-page-item utag-page-nav">
              <a href="?page={{ news_page.next_page_number }}" class="utag-page-link" aria-label="Next">
                <i class="fa fa-chevron-right"></i>
              </a>
            </li>
          {% else %}
            <li class="utag-page-item utag-page-nav disabled">
              <span class="utag-page-link"><i class="fa fa-chevron-right"></i></span>
            </li>
          {% endif %}
        </ul>
        <div class="utag-pagination-info">
          Page {{ news_page.number }} of {{ news_page.paginator.num_pages }}
        </div>
      </nav>
      {% endif %}
      
    {% else %}
      <div class="utag-empty-state">
        <i class="fa fa-newspaper-o"></i>
        <h3>No News Available</h3>
        <p>No news articles are currently available. Please check back later.</p>
        <a href="{% url 'website:index' %}" class="utag-view-all-btn">Return Home</a>
      </div>
    {% endif %}
  </div>
</section>
<!--End of News Page Area-->
{% endblock %}