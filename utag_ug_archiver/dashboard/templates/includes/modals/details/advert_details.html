<!-- advertisement_detail.html -->
{% for ad in adverts %}
  <div class="modal fade "
       id="advertDetailsModal_{{ ad.id }}"
       tabindex="-1"
       role="dialog"
       aria-labelledby="advertDetailsModal_{{ ad.id }}Label"
       aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="advertDetailsModal_{{ ad.id }}Label">
            Advertisement Details â€” {{ ad.title|default:ad.slot.name }}
          </h5>
          <button type="button"
                  class="btn-close"
                  data-bs-dismiss="modal"
                  aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="text-center">
            {% if ad.get_image_url %}
              <img src="{{ ad.get_image_url }}"
                   alt="Advertisement Image"
                   class="img-fluid">
            {% endif %}
          </div>
          <hr>
          <div class="row">
            <div class="col-md-6">
              <p>
                <strong>Placement:</strong> {{ ad.slot.name }} ({{ ad.slot.key }})
              </p>
              <p>
                <strong>Target URL:</strong> <a href="{{ ad.target_url }}" target="_blank">{{ ad.target_url }}</a>
              </p>
              <p>
                <strong>Start Date:</strong> {{ ad.start|date:"d M Y, H:i"|default:"Not set" }}
              </p>
              <p>
                <strong>End Date:</strong> {{ ad.end|date:"d M Y, H:i"|default:"Not set" }}
              </p>
              <p>
                <strong>Active:</strong>
                {% if ad.active %}
                  <span class="badge bg-success">Yes</span>
                {% else %}
                  <span class="badge bg-secondary">No</span>
                {% endif %}
              </p>
              {% if ad.html_content %}
                <p>
                  <strong>HTML Content:</strong> <span class="badge bg-info">Yes</span>
                </p>
              {% endif %}
            </div>
            <div class="col-md-6">
              <p>
                <strong>Status:</strong> {{ ad.get_status_display }}
              </p>
              <p>
                <strong>Impressions:</strong> {{ ad.impressions|default:0 }}
              </p>
              <p>
                <strong>Clicks:</strong> {{ ad.clicks|default:0 }}
              </p>
              <p>
                <strong>CTR:</strong>
                {% if ad.impressions > 0 %}
                  {% widthratio ad.clicks ad.impressions 100 %}%
                {% else %}
                  N/A
                {% endif %}
              </p>
              <p>
                <strong>Priority:</strong> {{ ad.priority }}
              </p>
              <p>
                <strong>Created At:</strong> {{ ad.created_at|date:"d M Y, H:i" }}
              </p>
              <p>
                <strong>Updated At:</strong> {{ ad.updated_at }}
              </p>
              {% if ad.image %}
                <p>
                  <strong>Image Dimensions:</strong> {{ ad.get_image_dimensions.0 }} x {{ ad.get_image_dimensions.1 }}
                </p>
              {% endif %}
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>
  {# Modal will be shown via the trigger on the adverts table; do not auto-show on page load #}
{% endfor %}
