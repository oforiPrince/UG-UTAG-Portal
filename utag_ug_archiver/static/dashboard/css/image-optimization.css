/**
 * Production Image Performance Settings
 * Add to your base template or settings HTML head
 */

/* 
 * Enable browser-native lazy loading
 * This CSS works with the loading="lazy" HTML attribute
 */
img[loading="lazy"] {
    background: linear-gradient(45deg, #f0f0f0 25%, transparent 25%, transparent 75%, #f0f0f0 75%, #f0f0f0),
                linear-gradient(45deg, #f0f0f0 25%, transparent 25%, transparent 75%, #f0f0f0 75%, #f0f0f0);
    background-size: 20px 20px;
    background-position: 0 0, 10px 10px;
    background-color: #e8e8e8;
}

/* 
 * Placeholder styles for lazy loading
 */
img.lazyload {
    opacity: 0.5;
    transition: opacity 0.3s ease-in-out;
}

img.lazyload-loading {
    opacity: 0.7;
}

img.lazyload-loaded {
    opacity: 1;
}

img.lazyload-error {
    opacity: 0.4;
    border: 1px solid #ccc;
    padding: 4px;
}

/* 
 * Prevent layout shift while image loads
 */
img[data-src] {
    display: block;
    min-height: 1px;
    width: 100%;
}

/* 
 * WebP support with JPEG fallback
 */
picture {
    display: inline-block;
}

/* 
 * Image container for aspect ratio preservation
 */
.img-container {
    overflow: hidden;
    background-color: #f5f5f5;
    position: relative;
}

.img-container.loading::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
    animation: shimmer 2s infinite;
}

@keyframes shimmer {
    0% {
        transform: translateX(-100%);
    }
    100% {
        transform: translateX(100%);
    }
}
